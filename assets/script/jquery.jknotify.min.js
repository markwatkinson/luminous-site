(function(d){var n={position:"fixed","background-color-fallback":"#000000","background-color":"rgba(0, 0, 0, 0.7)",color:"white",top:"2px",width:"250px",right:"10px",overflow:"auto"},e=d("<div>").addClass("notify_area").css("display","none"),o=function(b){typeof b["background-color-fallback"]!=="undefined"&&e.css("background-color",b["background-color-fallback"]);e.css(b)},p=function(){e.css("max-height",d(window).height()+"px")};d(document).ready(function(){o(n);p();d(window).resize(p);d("body").append(e)});
var h=[],g=false,i=function(b,a){var c=function(){if(g)setTimeout(c,50);else{g=true;h.push([b,a]);g=false;q()}};a=="show"?b.animate({height:"toggle"},0,"swing",c):c()},q=function(){if(h.length)if(!g){g=true;var b=h[0],a=b[0];b=b[1];h=h.slice(1);if(b=="show")l(a);else if(b=="close")r(a);else if(b=="collapse"){a=d(".knotify_message",a);if(a.data("jkcollapsed"))j();else{a.data("jkcollapsed",true);l(a)}}else if(b=="uncollapse"){a=d(".knotify_message",a);if(a.data("jkcollapsed")){a.data("jkcollapsed",
false);l(a)}else j()}else{console&&console.log('jKnotify: Unknown action "'+b+'"');j()}}},r=function(b){if(!b.data("jKnotifyClosed")){b.is(":animated")&&b.stop(true,true);b.data("jKnotifyClosed",true);b.animate({height:"toggle"},"fast","swing",function(){b.remove();e.is(":empty")&&e.hide();j()})}},j=function(){g=false;q()},l=function(b){b.animate({height:"toggle"},"fast","swing",function(){j()})};d.fn.jKnotifyClose=function(){this.each(function(){i(d(this),"close")});return this};d.jKnotify=function(b,
a){a=d.extend(true,{timeout:false,titleBar:true,collapse:false,title:false,icon:false,passive:true,css:{border:"2px solid gray","border-bottom":"1px solid gray","border-top":"1px solid gray"},containerCss:n,closeOnButtonClick:true,closable:true},a);var c=d("<div>").css("vertical-align","middle").css(a.css),k=null;e.css({"border-bottom":a.css["border-bottom"],"border-top":a.css["border-top"]});o(a.containerCss);if(b!==null){if(a.titleBar){var m=d("<div>").css({"background-color":e.css("background-color"),
opacity:"1.0",margin:"0.5em",position:"relative"}),f=d("<div>").css("width","90%");a.icon&&f.append(d('<img class="notification_icon">').attr("src",a.icon).css({"vertical-align":"middle","margin-left":"0.5em"}));f.append(d("<span>").html(a.title?a.title:"&nbsp").css("margin-left","0.5em").addClass("title"));m.append(f);if(a.closable){f=d("<span>x</span>").css({position:"absolute",top:"1px",right:"-2px",cursor:"default","margin-right":"0.5em","font-weight":"bold"});f.click(function(){c.jKnotifyClose();
return false});f.get(0).onselectstart=function(){return false};f.get(0).unselectable="on";f.css("-moz-user-select","none");m.append(f)}c.append(m)}c.append(d("<div>").html(b).css({"margin-left":"1em","margin-right":"1em","margin-bottom":"1em"}).addClass("knotify_message"));a.passive&&c.click(function(){c.jKnotifyClose()});a.closeOnButtonClick&&d("input[type=button]",c).click(function(){c.jKnotifyClose()});e.is(":empty")&&e.show();e.prepend(c);i(c,"show");a.timeout&&setTimeout(function(){c.jKnotifyClose()},
a.timeout);if(a.collapse){k=setTimeout(function(){i(c,"collapse")},a.collapse);c.mouseleave(function(){clearTimeout(k);k=setTimeout(function(){i(c,"collapse")},a.collapse)});c.mouseenter(function(){clearTimeout(k);i(c,"uncollapse")})}return c}}})(jQuery);
