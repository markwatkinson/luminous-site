(function(){(function(f){f.jKnotifyUi=function(){var a=f("<div>"),i=a,q=false,n=null,k={closeOnButtonClick:false,passive:false,closable:false},h={},o=null,r=null,s=null,p=function(){var b={},d,c;for(c in h)if(h.hasOwnProperty(c)){d=h[c];d=d.is(":checkbox")?!!d.attr("checked"):h[c].val();if(typeof d==="undefined")d="";b[c]=d}return b},l=function(b){if(r!==b){if(typeof b!=="undefined")r=b;s=f("<p>")}return s};a.jK={};a.jK.form=function(b,d){q=true;i=f("<form>").attr("method",b).attr("action",d);a.append(i);
return a};a.jK.close=function(b){o&&typeof b!=="undefined"&&o(b);n!==null&&n.jKnotifyClose();return a};a.jK.icon=function(b){k.icon=b;return a};a.jK.title=function(b){k.title=b;return a};a.jK.callback=function(b){o=b;return a};a.jK.text=function(b){i.append(l().text(b));return a};a.jK.toggleInput=function(b,d,c){var g=f("<input type=checkbox>").attr("checked",!!c);g.data("jKdefault",!!c);h[d]=g;i.append(l().text(b).append(g));return a};a.jK.selectInput=function(b,d,c,g,m){var e=f("<select>");m&&e.change(function(){a.jK.close(p())});
for(var j in c)c.hasOwnProperty(j)&&e.append(f("<option>").text(c[j]).val(j).attr("selected",g===j));e.data("jKdefault",g);h[d]=e;i.append(l().text(b).append(e));return a};a.jK.textInput=function(b,d,c){c=f.extend(true,{closeOnEnter:true,password:false,def:""},c);var g=f('<input type="'+(c.password?"password":"text")+'">').data("jKdefault",c.def);g.val(g.data("jKdefault"));h[d]=g;c.closeOnEnter&&g.keypress(function(m){m.keyCode==13&&a.jK.close(p())});i.append(f("<p>").text(b).append(g));return a};
a.jK.button=function(b,d){var c={yes:function(){a.jK.close(true)},no:function(){a.jK.close(false)},submit:function(){a.jK.close(p())},cancel:function(){a.jK.close()},reset:function(){f.each(h,function(m,e){if(e.is(":text")||e.is(":password"))e.val(e.data("jKdefault"));else if(e.is(":checkbox"))e.attr("checked",e.data("jKdefault"));else if(e.is("select")){f("option:selected",e).attr("selected",false);var j=e.data("jKdefault").replace(/[!"#$%&'()*+,\.\/:;?@\[\\\]^`{|}~)]/g,"\\$0");f('option[value="'+
j+'"]').attr("selected",true)}})}},g=f('<input type="'+(d=="submit"?"submit":"button")+'">').attr("value",b);g.click(function(){if(c[d])c[d]()});i.append(l("button").append(g));return a};a.jK.closable=function(b){k.closable=b;return a};a.jK.finish=function(){if(q)for(var b in h)h.hasOwnProperty(b)&&h[b].attr("name",b);n=f.jKnotify(a,k);return a};return a}})(jQuery)})(jQuery);
